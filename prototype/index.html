<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LMDT71XZ0C"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-LMDT71XZ0C');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7499028717075061"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="iUNSsOQ8Uw21911zTxrbq0FNyaY7uwQu6iq8XffofsA" />
    <title>Today's lunch near you</title>
    <meta name="description" content="Today's lunch from restaurants near you – updated automatically." />
    
    <style>
        /* CSS Variables matching reference design */
        :root {
            --background: #ffffff;
            --foreground: #0a0a0a;
            --card: #ffffff;
            --card-foreground: #0a0a0a;
            --primary: #030213;
            --primary-foreground: #ffffff;
            --secondary: #f3f4f6;
            --secondary-foreground: #030213;
            --muted: #f9fafb;
            --muted-foreground: #6b7280;
            --accent: #f3f4f6;
            --accent-foreground: #030213;
            --border: rgba(0, 0, 0, 0.1);
            --radius: 0.625rem;
            --blue-50: #eff6ff;
            --indigo-100: #e0e7ff;
            --blue-600: #2563eb;
            --orange-500: #f97316;
            --red-500: #ef4444;
            --green-50: #f0fdf4;
            --green-700: #15803d;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: var(--foreground);
            line-height: 1.5;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.6);
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.05);
        }

        .header-container {
            max-width: 1792px;
            margin: 0 auto;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .icon-utensils {
            width: 2rem;
            height: 2rem;
            color: var(--blue-600);
        }

        .header-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1d1d1f;
            margin: 0;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        .header-subtitle {
            font-size: 0.875rem;
            color: #6e6e73;
            margin: 0;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .language-toggle {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 0.5px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            color: #1d1d1f;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .language-toggle:hover {
            background: rgba(255, 255, 255, 0.8);
            border: 0.5px solid rgba(0, 0, 0, 0.15);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.5rem 0.75rem;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            color: #1d1d1f;
            border: 0.5px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        /* Currency Badge */
        .currency-badge {
            background: rgba(34, 197, 94, 0.2);
            color: #15803d;
            border: 0.5px solid rgba(34, 197, 94, 0.3);
        }

        /* Main Content */
        .main-container {
            max-width: 1792px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        .hero-section {
            text-align: center;
            margin-bottom: 3rem;
            max-width: 42rem;
            margin-left: auto;
            margin-right: auto;
        }

        .hero-section h1 {
            font-size: 1.875rem;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 1rem;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.5);
        }

        .hero-section p {
            font-size: 1.125rem;
            color: #6e6e73;
            margin-bottom: 2rem;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.3);
        }

        /* Floating Random Button */
        .floating-random-button {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            color: white;
            border: none;
            border-radius: 2rem;
            padding: 0.75rem 1.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(255, 107, 53, 0.4);
            white-space: nowrap;
            min-width: 200px;
            max-width: 280px;
            height: 48px;
        }

        .floating-random-button:hover {
            transform: translateX(-50%) translateY(-2px);
            background: linear-gradient(135deg, #ff8a5b 0%, #ffa726 100%);
            box-shadow: 0 6px 25px rgba(255, 107, 53, 0.5);
        }

        .floating-random-button:active {
            transform: translateX(-50%) translateY(0px) scale(0.98);
            transition: all 0.1s ease;
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .floating-random-button {
                bottom: 1.5rem;
                font-size: 0.8rem;
                padding: 0.625rem 1.25rem;
                min-width: 180px;
                max-width: 250px;
                height: 44px;
            }
        }

        /* Restaurant Grid - Simple Masonry Layout */
        .restaurant-grid {
            column-count: 1;
            column-gap: 1.5rem;
            width: 100%;
        }

        /* Responsive Columns */
        @media (min-width: 768px) {
            .restaurant-grid {
                column-count: 2;
            }
        }

        @media (min-width: 1024px) {
            .restaurant-grid {
                column-count: 3;
            }
        }

        .restaurant-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border-radius: 20px;
            border: 0.5px solid rgba(255, 255, 255, 0.8);
            overflow: hidden;
            transition: all 0.3s ease;
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.08),
                0 2px 8px rgba(0, 0, 0, 0.04),
                inset 0 1px 0 rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            break-inside: avoid;
            margin-bottom: 1.5rem;
            width: 100%;
        }

        .restaurant-card:hover {
            transform: translateY(-2px);
            box-shadow: 
                0 12px 40px rgba(0, 0, 0, 0.12),
                0 4px 12px rgba(0, 0, 0, 0.08),
                inset 0 1px 0 rgba(255, 255, 255, 1);
            background: rgba(255, 255, 255, 0.85);
            border: 0.5px solid rgba(255, 255, 255, 1);
        }

        .restaurant-card.highlighted {
            border: 2px solid var(--orange-500);
            box-shadow: 0 10px 25px rgba(249, 115, 22, 0.3);
            transform: translateY(-1px);
        }

        .restaurant-header {
            padding: 1.5rem 1.5rem 0;
            display: grid;
            grid-template-columns: 1fr auto;
            grid-template-rows: auto auto;
            gap: 1rem 1.5rem;
            align-items: start;
        }

        .restaurant-info {
            flex: 1;
            min-width: 0;
        }

        .restaurant-name {
            font-size: 1.25rem;
            font-weight: 600;
            margin: 0 0 0.25rem 0;
            color: #1d1d1f;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        .restaurant-meta {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
            font-size: 0.875rem;
            color: #6e6e73;
        }

        .restaurant-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .cuisine-badge {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            background: var(--secondary);
            color: var(--secondary-foreground);
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.75rem;
            font-weight: 500;
            margin-top: 0.5rem;
        }

        .restaurant-links {
            display: flex;
            gap: 0.5rem;
            align-items: flex-start;
            flex-shrink: 0;
        }

        .restaurant-links a {
            color: var(--primary);
            text-decoration: none;
            font-size: 1.2rem;
            opacity: 0.8;
            transition: opacity 0.2s ease;
        }

        .restaurant-links a:hover {
            opacity: 1;
        }

        .restaurant-content {
            padding: 0 1.5rem 1.5rem;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .menu-section h3 {
            font-size: 1rem;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }

        .menu-items {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 1rem;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.4);
            border-radius: 12px;
            border: 0.5px solid rgba(255, 255, 255, 0.6);
            transition: all 0.2s ease;
            min-height: fit-content;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.6);
            border: 0.5px solid rgba(255, 255, 255, 0.8);
        }

        .menu-item-details {
            flex: 1;
            min-width: 0;
        }

        .menu-item-name {
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 0.25rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            line-height: 1.4;
        }

        .menu-item-description {
            font-size: 0.875rem;
            color: #6e6e73;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            line-height: 1.4;
        }

        .menu-item-price {
            font-weight: 600;
            color: #1d1d1f;
            align-self: flex-start;
            flex-shrink: 0;
            margin-left: 0.5rem;
            max-width: 180px;
            text-align: right;
            line-height: 1.3;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }

        .emoji-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.25rem;
            margin-top: 0.5rem;
        }

        .emoji-tag {
            font-size: 1.1rem;
        }

        /* Separator */
        .separator {
            height: 1px;
            background: var(--border);
            margin: 1.5rem 0;
        }

        /* Special Offer */
        .special-offer {
            background: var(--green-50);
            color: var(--green-700);
            padding: 0.75rem;
            border-radius: var(--radius);
            font-weight: 500;
            font-size: 0.875rem;
            margin-top: auto;
        }

        /* Footer */
        .footer {
            max-width: 1280px;
            margin: 3rem auto 0;
            padding: 2rem 1.5rem;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            text-align: center;
            color: #6e6e73;
        }

        .footer p {
            margin: 0.5rem 0;
        }

        .footer a {
            color: #1d1d1f;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Icons using CSS */
        .icon-utensils::before { content: "🍽️"; }
        .icon-clock::before { content: "🕐"; }
        .icon-map::before { content: "📍"; }
        .icon-menu::before { content: "📋"; }
        .icon-language::before { content: "🌐"; }

        /* No Data Message */
        .no-data {
            text-align: center;
            padding: 3rem;
            color: var(--muted-foreground);
        }

        .no-data h2 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: var(--foreground);
        }

        /* Hidden class for language switching */
        .hidden {
            display: none;
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 3rem;
            color: #6e6e73;
        }

        .spinner {
            display: inline-block;
            width: 2rem;
            height: 2rem;
            border: 3px solid rgba(110, 110, 115, 0.3);
            border-top: 3px solid #6e6e73;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .hero-section h1 {
                font-size: 2rem;
            }
            
            .restaurant-grid {
                grid-template-columns: 1fr;
            }
            
            .restaurant-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.75rem;
            }
            
            .restaurant-links {
                align-self: flex-end;
            }
        }

        @media (max-width: 480px) {
            .restaurant-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .menu-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
                padding: 1rem;
            }
            
            .menu-item-details {
                width: 100%;
            }
            
            .menu-item-name {
                font-size: 0.95rem;
                line-height: 1.3;
            }
            
            .menu-item-description {
                font-size: 0.8rem;
                line-height: 1.3;
            }
            
            .menu-item-price {
                align-self: flex-end;
                margin-left: 0;
                margin-top: 0.25rem;
                max-width: 100%;
                text-align: left;
            }

            .restaurant-header {
                flex-direction: column;
                align-items: stretch;
            }

            .restaurant-links {
                align-self: flex-start;
            }
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <span class="icon-utensils" style="font-size: 2rem; color: var(--primary);"></span>
                <div>
                    <h1 class="header-title" onclick="goToTop()">Lunch Finder</h1>
                    <p class="header-subtitle">
                        <span class="en">Today's lunch near you</span>
                        <span class="sv hidden">Dagens lunch nära dig</span>
                    </p>
                </div>
            </div>
            <div class="header-right">
                <button class="language-toggle" onclick="toggleLanguage()">
                    <span class="icon-language"></span>
                    <span class="en">Svenska</span>
                    <span class="sv hidden">English</span>
                </button>
                <div class="badge currency-badge" id="currencyBadge">
                    <span>💰</span>
                    <span id="currencyText">USD</span>
                </div>
                <div class="badge" id="locationBadge">
                    <span class="icon-clock"></span>
                    <span class="en">Detecting location...</span>
                    <span class="sv hidden">Hittar plats...</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <div class="hero-section">
            <h1>
                <span class="en">What should you eat today?</span>
                <span class="sv hidden">Vad ska du äta idag?</span>
            </h1>
            <p>
                <span class="en">Discover lunch options within 2km of your location</span>
                <span class="sv hidden">Upptäck lunchalternativ inom 2km från din plats</span>
            </p>
        </div>

        <div id="restaurantsContainer">
            <div class="loading">
                <div class="spinner"></div>
                <div>
                    <span class="en">Finding restaurants near you...</span>
                    <span class="sv hidden">Hittar restauranger nära dig...</span>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Floating Random Button -->
    <button class="floating-random-button" onclick="selectRandomRestaurant()" id="randomButton" style="display: none;">
        <span class="en">Pick something for me</span>
        <span class="sv hidden">Välj något åt mig</span>
    </button>
    
    <!-- Footer -->
    <footer class="footer">
        <p>
            <span class="icon-map"></span> 
            <span class="en">Location-based lunch discovery</span>
            <span class="sv hidden">Platsbaserad lunchupptäckt</span>
        </p>
        <p>
            <span class="en">Automatically finds restaurants within 2km of your location</span>
            <span class="sv hidden">Hittar automatiskt restauranger inom 2km från din plats</span>
        </p>
        <p>
            <span class="en">Enhanced version with location services –</span>
            <span class="sv hidden">Förbättrad version med platstjänster –</span>
            <a href="https://github.com/designestjay/lindholmen-lunch" target="_blank">GitHub - Lunch Finder</a>
        </p>
        <p>
            <span class="en">Questions, feedback or suggestions? Feel free to open an issue or contact via GitHub</span>
            <span class="sv hidden">Frågor, feedback eller förslag? Öppna gärna ett issue eller kontakta via GitHub</span>
        </p>
        <p style="margin-top: 1rem; font-size: 0.8rem;">
            <a href="privacy.html">
                <span class="en">Privacy Policy</span>
                <span class="sv hidden">Integritetspolicy</span>
            </a>
        </p>
    </footer>

    <script>
        class CurrencyService {
            constructor() {
                this.exchangeRates = {
                    USD: 1.0,
                    EUR: 0.85,
                    GBP: 0.73,
                    SEK: 10.50,
                    NOK: 10.80,
                    DKK: 6.35,
                    CHF: 0.88,
                    CAD: 1.35,
                    AUD: 1.45,
                    JPY: 110.0,
                    CNY: 6.45,
                    INR: 74.5,
                    BRL: 5.2,
                    MXN: 20.1,
                    RUB: 73.5,
                    KRW: 1180.0,
                    SGD: 1.35,
                    HKD: 7.8,
                    NZD: 1.42,
                    ZAR: 14.8,
                    TRY: 8.5,
                    PLN: 3.9,
                    CZK: 21.5,
                    HUF: 295.0,
                    RON: 4.2,
                    BGN: 1.66,
                    HRK: 6.4,
                    RSD: 100.0,
                    UAH: 27.0,
                    THB: 31.5,
                    MYR: 4.15,
                    IDR: 14250.0,
                    PHP: 50.5,
                    VND: 23000.0,
                    AED: 3.67,
                    SAR: 3.75,
                    QAR: 3.64,
                    KWD: 0.30,
                    BHD: 0.38,
                    OMR: 0.38,
                    JOD: 0.71,
                    LBP: 1507.5,
                    EGP: 15.7,
                    MAD: 8.9,
                    TND: 2.8,
                    DZD: 134.0,
                    NGN: 411.0,
                    GHS: 6.1,
                    KES: 108.0,
                    UGX: 3550.0,
                    TZS: 2320.0,
                    ZMW: 16.8,
                    BWP: 11.2,
                    MUR: 42.5,
                    SCR: 13.4,
                    ETB: 44.3,
                    RWF: 1030.0,
                    XOF: 558.0,
                    XAF: 558.0,
                    CLP: 800.0,
                    ARS: 98.5,
                    UYU: 43.8,
                    PYG: 6850.0,
                    BOB: 6.9,
                    PEN: 3.6,
                    COP: 3750.0,
                    VES: 4.18,
                    GYD: 209.0,
                    SRD: 14.3,
                    TTD: 6.8,
                    JMD: 146.0,
                    BBD: 2.0,
                    BSD: 1.0,
                    BZD: 2.0,
                    XCD: 2.7,
                    AWG: 1.8,
                    ANG: 1.8,
                    CUP: 24.0,
                    DOP: 56.5,
                    GTQ: 7.7,
                    HNL: 24.1,
                    NIO: 35.2,
                    CRC: 620.0,
                    PAB: 1.0,
                    SVC: 8.75,
                    HTG: 87.0,
                    ISK: 129.0,
                    ALL: 103.0,
                    MKD: 52.4,
                    BAM: 1.66,
                    MDL: 17.8,
                    GEL: 3.1,
                    AMD: 523.0,
                    AZN: 1.7,
                    BYN: 2.6,
                    KZT: 425.0,
                    KGS: 84.7,
                    TJS: 11.3,
                    TMT: 3.5,
                    UZS: 10650.0,
                    AFN: 87.0,
                    PKR: 176.0,
                    LKR: 200.0,
                    BDT: 85.0,
                    BTN: 74.5,
                    MVR: 15.4,
                    NPR: 119.0,
                    MMK: 1780.0,
                    LAK: 9500.0,
                    KHR: 4080.0,
                    BND: 1.35,
                    FJD: 2.1,
                    PGK: 3.5,
                    SBD: 8.0,
                    TOP: 2.3,
                    VUV: 112.0,
                    WST: 2.6,
                    XPF: 101.0
                };

                this.countryToCurrency = {
                    // North America
                    'US': 'USD', 'CA': 'CAD', 'MX': 'MXN',
                    'GT': 'GTQ', 'BZ': 'BZD', 'SV': 'USD', 'HN': 'HNL',
                    'NI': 'NIO', 'CR': 'CRC', 'PA': 'PAB',
                    
                    // Europe
                    'AD': 'EUR', 'AT': 'EUR', 'BE': 'EUR', 'CY': 'EUR', 'EE': 'EUR',
                    'FI': 'EUR', 'FR': 'EUR', 'DE': 'EUR', 'GR': 'EUR', 'IE': 'EUR',
                    'IT': 'EUR', 'LV': 'EUR', 'LT': 'EUR', 'LU': 'EUR', 'MT': 'EUR',
                    'MC': 'EUR', 'NL': 'EUR', 'PT': 'EUR', 'SM': 'EUR', 'SK': 'EUR',
                    'SI': 'EUR', 'ES': 'EUR', 'VA': 'EUR',
                    'GB': 'GBP', 'SE': 'SEK', 'NO': 'NOK', 'DK': 'DKK', 'CH': 'CHF',
                    'IS': 'ISK', 'PL': 'PLN', 'CZ': 'CZK', 'HU': 'HUF', 'RO': 'RON',
                    'BG': 'BGN', 'HR': 'HRK', 'RS': 'RSD', 'BA': 'BAM', 'MK': 'MKD',
                    'AL': 'ALL', 'ME': 'EUR', 'XK': 'EUR', 'MD': 'MDL', 'UA': 'UAH',
                    'BY': 'BYN', 'RU': 'RUB', 'GE': 'GEL', 'AM': 'AMD', 'AZ': 'AZN',
                    'TR': 'TRY',
                    
                    // Asia
                    'CN': 'CNY', 'JP': 'JPY', 'KR': 'KRW', 'IN': 'INR', 'TH': 'THB',
                    'MY': 'MYR', 'SG': 'SGD', 'ID': 'IDR', 'PH': 'PHP', 'VN': 'VND',
                    'HK': 'HKD', 'TW': 'TWD', 'MO': 'MOP', 'BN': 'BND', 'KH': 'KHR',
                    'LA': 'LAK', 'MM': 'MMK', 'AF': 'AFN', 'PK': 'PKR', 'BD': 'BDT',
                    'LK': 'LKR', 'MV': 'MVR', 'NP': 'NPR', 'BT': 'BTN', 'KZ': 'KZT',
                    'KG': 'KGS', 'TJ': 'TJS', 'TM': 'TMT', 'UZ': 'UZS', 'MN': 'MNT',
                    
                    // Middle East
                    'AE': 'AED', 'SA': 'SAR', 'QA': 'QAR', 'KW': 'KWD', 'BH': 'BHD',
                    'OM': 'OMR', 'JO': 'JOD', 'LB': 'LBP', 'SY': 'SYP', 'IQ': 'IQD',
                    'IR': 'IRR', 'IL': 'ILS', 'PS': 'ILS', 'YE': 'YER',
                    
                    // Africa
                    'EG': 'EGP', 'LY': 'LYD', 'TN': 'TND', 'DZ': 'DZD', 'MA': 'MAD',
                    'SD': 'SDG', 'SS': 'SSP', 'ET': 'ETB', 'ER': 'ERN', 'DJ': 'DJF',
                    'SO': 'SOS', 'KE': 'KES', 'UG': 'UGX', 'TZ': 'TZS', 'RW': 'RWF',
                    'BI': 'BIF', 'CD': 'CDF', 'CF': 'XAF', 'TD': 'XAF', 'CM': 'XAF',
                    'GQ': 'XAF', 'GA': 'XAF', 'CG': 'XAF', 'AO': 'AOA', 'ZM': 'ZMW',
                    'ZW': 'ZWL', 'BW': 'BWP', 'NA': 'NAD', 'ZA': 'ZAR', 'LS': 'LSL',
                    'SZ': 'SZL', 'MZ': 'MZN', 'MW': 'MWK', 'MG': 'MGA', 'MU': 'MUR',
                    'SC': 'SCR', 'KM': 'KMF', 'YT': 'EUR', 'RE': 'EUR',
                    'GH': 'GHS', 'NG': 'NGN', 'BJ': 'XOF', 'TG': 'XOF', 'BF': 'XOF',
                    'ML': 'XOF', 'NE': 'XOF', 'CI': 'XOF', 'LR': 'LRD', 'SL': 'SLL',
                    'GN': 'GNF', 'GW': 'XOF', 'CV': 'CVE', 'SN': 'XOF', 'GM': 'GMD',
                    'MR': 'MRU',
                    
                    // South America
                    'BR': 'BRL', 'AR': 'ARS', 'CL': 'CLP', 'PE': 'PEN', 'BO': 'BOB',
                    'PY': 'PYG', 'UY': 'UYU', 'CO': 'COP', 'VE': 'VES', 'EC': 'USD',
                    'GY': 'GYD', 'SR': 'SRD', 'GF': 'EUR', 'FK': 'FKP',
                    
                    // Caribbean
                    'CU': 'CUP', 'JM': 'JMD', 'HT': 'HTG', 'DO': 'DOP', 'PR': 'USD',
                    'VI': 'USD', 'BB': 'BBD', 'TT': 'TTD', 'GD': 'XCD', 'VC': 'XCD',
                    'LC': 'XCD', 'DM': 'XCD', 'AG': 'XCD', 'KN': 'XCD', 'AI': 'XCD',
                    'MS': 'XCD', 'VG': 'USD', 'KY': 'KYD', 'TC': 'USD', 'BS': 'BSD',
                    'BM': 'BMD', 'AW': 'AWG', 'CW': 'ANG', 'SX': 'ANG', 'BQ': 'USD',
                    
                    // Oceania
                    'AU': 'AUD', 'NZ': 'NZD', 'FJ': 'FJD', 'PG': 'PGK', 'SB': 'SBD',
                    'VU': 'VUV', 'NC': 'XPF', 'PF': 'XPF', 'WF': 'XPF', 'CK': 'NZD',
                    'NU': 'NZD', 'PN': 'NZD', 'TK': 'NZD', 'TO': 'TOP', 'WS': 'WST',
                    'KI': 'AUD', 'TV': 'AUD', 'NR': 'AUD', 'PW': 'USD', 'FM': 'USD',
                    'MH': 'USD', 'MP': 'USD', 'GU': 'USD', 'AS': 'USD'
                };

                this.currencySymbols = {
                    'USD': '$', 'EUR': '€', 'GBP': '£', 'JPY': '¥', 'CNY': '¥',
                    'KRW': '₩', 'INR': '₹', 'RUB': '₽', 'SEK': 'kr', 'NOK': 'kr',
                    'DKK': 'kr', 'CHF': 'Fr', 'CAD': 'C$', 'AUD': 'A$', 'NZD': 'NZ$',
                    'BRL': 'R$', 'MXN': '$', 'ARS': '$', 'CLP': '$', 'COP': '$',
                    'PEN': 'S/', 'UYU': '$U', 'BOB': 'Bs', 'PYG': '₲', 'VES': 'Bs',
                    'ZAR': 'R', 'EGP': 'E£', 'NGN': '₦', 'GHS': '₵', 'KES': 'KSh',
                    'UGX': 'USh', 'TZS': 'TSh', 'ETB': 'Br', 'MAD': 'DH', 'TND': 'DT',
                    'DZD': 'DA', 'AED': 'د.إ', 'SAR': 'ر.س', 'QAR': 'ر.ق', 'KWD': 'د.ك',
                    'BHD': '.د.ب', 'OMR': 'ر.ع.', 'JOD': 'د.ا', 'LBP': 'ل.ل',
                    'THB': '฿', 'MYR': 'RM', 'SGD': 'S$', 'IDR': 'Rp', 'PHP': '₱',
                    'VND': '₫', 'HKD': 'HK$', 'TWD': 'NT$', 'PKR': '₨', 'BDT': '৳',
                    'LKR': 'Rs', 'NPR': 'Rs', 'AFN': '؋', 'KZT': '₸', 'UZS': 'soʻm',
                    'TRY': '₺', 'PLN': 'zł', 'CZK': 'Kč', 'HUF': 'Ft', 'RON': 'lei',
                    'BGN': 'лв', 'HRK': 'kn', 'RSD': 'дин', 'UAH': '₴', 'BYN': 'Br',
                    'GEL': '₾', 'AMD': '֏', 'AZN': '₼', 'ISK': 'kr', 'ALL': 'L',
                    'MKD': 'ден', 'BAM': 'КМ', 'MDL': 'L'
                };

                this.currentCurrency = 'USD';
                this.currentCountry = null;
            }

            async detectCurrencyFromLocation(lat, lng) {
                try {
                    // Simulate reverse geocoding API call
                    const country = await this.reverseGeocode(lat, lng);
                    this.currentCountry = country;
                    
                    const currency = this.countryToCurrency[country] || 'USD';
                    this.currentCurrency = currency;
                    
                    return {
                        country: country,
                        currency: currency,
                        symbol: this.currencySymbols[currency] || currency
                    };
                } catch (error) {
                    console.error('Currency detection failed:', error);
                    return {
                        country: 'US',
                        currency: 'USD',
                        symbol: '$'
                    };
                }
            }

            async reverseGeocode(lat, lng) {
                // Simulate reverse geocoding based on coordinates
                // In production, this would call a real geocoding API
                
                // Simple coordinate-based country detection for demo
                if (lat >= 55 && lat <= 69 && lng >= 10 && lng <= 25) return 'SE'; // Sweden
                if (lat >= 58 && lat <= 71 && lng >= 4 && lng <= 31) return 'NO'; // Norway
                if (lat >= 54 && lat <= 58 && lng >= 8 && lng <= 15) return 'DK'; // Denmark
                if (lat >= 45 && lat <= 55 && lng >= 5 && lng <= 15) return 'DE'; // Germany
                if (lat >= 41 && lat <= 51 && lng >= -5 && lng <= 10) return 'FR'; // France
                if (lat >= 50 && lat <= 59 && lng >= -8 && lng <= 2) return 'GB'; // UK
                if (lat >= 35 && lat <= 47 && lng >= 6 && lng <= 19) return 'IT'; // Italy
                if (lat >= 35 && lat <= 44 && lng >= -10 && lng <= 5) return 'ES'; // Spain
                if (lat >= 25 && lat <= 49 && lng >= -125 && lng <= -66) return 'US'; // USA
                if (lat >= 41 && lat <= 84 && lng >= -141 && lng <= -52) return 'CA'; // Canada
                if (lat >= 14 && lat <= 33 && lng >= -118 && lng <= -86) return 'MX'; // Mexico
                if (lat >= -55 && lat <= 12 && lng >= -82 && lng <= -34) return 'BR'; // Brazil
                if (lat >= -56 && lat <= -21 && lng >= -74 && lng <= -53) return 'AR'; // Argentina
                if (lat >= 20 && lat <= 54 && lng >= 73 && lng <= 135) return 'CN'; // China
                if (lat >= 24 && lat <= 46 && lng >= 123 && lng <= 146) return 'JP'; // Japan
                if (lat >= 33 && lat <= 43 && lng >= 124 && lng <= 132) return 'KR'; // South Korea
                if (lat >= 6 && lat <= 37 && lng >= 68 && lng <= 97) return 'IN'; // India
                if (lat >= -44 && lat <= -10 && lng >= 113 && lng <= 154) return 'AU'; // Australia
                
                // Default to US if no match
                return 'US';
            }

            convertPrice(priceString, fromCurrency = 'USD', toCurrency = null) {
                if (!toCurrency) toCurrency = this.currentCurrency;
                if (fromCurrency === toCurrency) return priceString;

                // Extract numeric value from price string
                const numericValue = parseFloat(priceString.replace(/[^0-9.]/g, ''));
                if (isNaN(numericValue)) return priceString;

                // Convert to target currency
                const usdValue = numericValue / this.exchangeRates[fromCurrency];
                const convertedValue = usdValue * this.exchangeRates[toCurrency];

                // Format with appropriate symbol and decimal places
                const symbol = this.currencySymbols[toCurrency] || toCurrency;
                
                // Different formatting for different currencies
                if (['JPY', 'KRW', 'VND', 'IDR', 'CLP', 'PYG', 'UGX', 'TZS', 'RWF', 'KHR', 'LAK', 'MMK', 'UZS'].includes(toCurrency)) {
                    // No decimal places for these currencies
                    return `${symbol}${Math.round(convertedValue).toLocaleString()}`;
                } else {
                    // 2 decimal places for most currencies
                    return `${symbol}${convertedValue.toFixed(2)}`;
                }
            }

            getCurrencyInfo() {
                return {
                    currency: this.currentCurrency,
                    symbol: this.currencySymbols[this.currentCurrency] || this.currentCurrency,
                    country: this.currentCountry
                };
            }
        }

        class LocationLunchFinder {
            constructor() {
                this.currentLocation = null;
                this.restaurants = [];
                this.currencyService = new CurrencyService();
                this.init();
            }

            async init() {
                await this.detectLocation();
                await this.loadRestaurants();
                this.setupEventListeners();
            }

            setupEventListeners() {
                // Random button will be set up after restaurants load
            }

            async detectLocation() {
                const badge = document.getElementById('locationBadge');
                const currencyBadge = document.getElementById('currencyBadge');
                const currencyText = document.getElementById('currencyText');
                
                try {
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 300000
                        });
                    });

                    this.currentLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    // Detect currency based on location
                    const currencyInfo = await this.currencyService.detectCurrencyFromLocation(
                        this.currentLocation.lat, 
                        this.currentLocation.lng
                    );

                    // Update UI
                    badge.innerHTML = `
                        <span class="icon-map"></span>
                        <span class="en">Location found</span>
                        <span class="sv hidden">Plats hittad</span>
                    `;
                    badge.style.background = 'rgba(34, 197, 94, 0.2)';

                    currencyText.textContent = `${currencyInfo.symbol} ${currencyInfo.currency}`;
                    currencyBadge.title = `Currency: ${currencyInfo.currency} (${currencyInfo.country})`;

                } catch (error) {
                    console.error('Location error:', error);
                    badge.innerHTML = `
                        <span class="icon-map"></span>
                        <span class="en">Using default area</span>
                        <span class="sv hidden">Använder standardområde</span>
                    `;
                    badge.style.background = 'rgba(249, 115, 22, 0.2)';
                    
                    // Use default location (Gothenburg) and currency
                    this.currentLocation = { lat: 57.7089, lng: 11.9746 };
                    const currencyInfo = await this.currencyService.detectCurrencyFromLocation(57.7089, 11.9746);
                    currencyText.textContent = `${currencyInfo.symbol} ${currencyInfo.currency}`;
                }
            }

            async loadRestaurants() {
                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    this.restaurants = this.generateRestaurants();
                    this.displayRestaurants();
                    
                    // Show random button
                    document.getElementById('randomButton').style.display = 'inline-flex';

                } catch (error) {
                    console.error('Error loading restaurants:', error);
                    document.getElementById('restaurantsContainer').innerHTML = `
                        <div class="no-data">
                            <h2>
                                <span class="en">No restaurants found</span>
                                <span class="sv hidden">Inga restauranger hittades</span>
                            </h2>
                            <p>
                                <span class="en">We couldn't find any restaurants in your area. Please try again later.</span>
                                <span class="sv hidden">Vi kunde inte hitta några restauranger i ditt område. Försök igen senare.</span>
                            </p>
                        </div>
                    `;
                }
            }

            generateRestaurants() {
                const cuisines = ['italian', 'asian', 'american', 'mexican', 'indian', 'mediterranean', 'french'];
                const restaurants = [];

                for (let i = 0; i < 12; i++) {
                    const cuisine = cuisines[Math.floor(Math.random() * cuisines.length)];
                    const distance = Math.random() * 2000; // Within 2km
                    const isOpen = Math.random() > 0.25; // 75% chance of being open
                    const rating = 3.5 + Math.random() * 1.5;
                    const walkTime = Math.floor(distance / 80) + 3; // Walking time

                    restaurants.push({
                        id: `restaurant_${i}`,
                        name: this.generateRestaurantName(cuisine),
                        cuisine: cuisine,
                        rating: rating,
                        distance: distance,
                        walkTime: walkTime,
                        isOpen: isOpen,
                        menu: this.generateMenu(cuisine)
                    });
                }

                return restaurants.sort((a, b) => a.distance - b.distance);
            }

            generateRestaurantName(cuisine) {
                const names = {
                    italian: ['Bella Vista', 'Mama Mia Trattoria', 'La Dolce Vita', 'Nonna\'s Kitchen', 'Amore Italiano'],
                    asian: ['Golden Dragon', 'Sakura Sushi', 'Pho Saigon', 'Bamboo Garden', 'Zen Kitchen'],
                    american: ['The Burger Joint', 'Liberty Grill', 'Main Street Diner', 'All-American Eats'],
                    mexican: ['El Sombrero', 'Casa Mexicana', 'Fiesta Cantina', 'Los Amigos Tacos'],
                    indian: ['Spice Palace', 'Taj Mahal', 'Curry House', 'Mumbai Express', 'Saffron Garden'],
                    mediterranean: ['Olive Branch', 'Mediterranean Breeze', 'Santorini Grill', 'Cyprus Kitchen'],
                    french: ['Le Petit Bistro', 'Café de Paris', 'Brasserie Lyon', 'Chez Pierre']
                };
                
                const nameList = names[cuisine] || ['Local Eatery'];
                return nameList[Math.floor(Math.random() * nameList.length)];
            }

            generateMenu(cuisine) {
                const baseMenus = {
                    italian: [
                        { name: 'Margherita Pizza', description: 'Fresh tomato sauce, mozzarella, basil', price: 16, category: 'Pizza' },
                        { name: 'Spaghetti Carbonara', description: 'Eggs, pancetta, parmesan, black pepper', price: 18, category: 'Pasta' },
                        { name: 'Caesar Salad', description: 'Romaine lettuce, croutons, parmesan', price: 14, category: 'Salads' },
                        { name: 'Lasagna Bolognese', description: 'Layers of pasta, meat sauce, bechamel', price: 20, category: 'Pasta' },
                        { name: 'Bruschetta', description: 'Toasted bread with tomatoes and basil', price: 8, category: 'Appetizers' },
                        { name: 'Tiramisu', description: 'Coffee-flavored Italian dessert', price: 9, category: 'Desserts' },
                        { name: 'Risotto Mushroom', description: 'Creamy rice with wild mushrooms', price: 17, category: 'Risotto' },
                        { name: 'Prosciutto Pizza', description: 'Tomato sauce, mozzarella, prosciutto, arugula', price: 19, category: 'Pizza' }
                    ],
                    asian: [
                        { name: 'Chicken Teriyaki Bowl', description: 'Grilled chicken, rice, vegetables', price: 15, category: 'Bowls' },
                        { name: 'Vegetable Fried Rice', description: 'Wok-fried rice with mixed vegetables', price: 13, category: 'Rice' },
                        { name: 'Miso Soup', description: 'Traditional Japanese soup', price: 6, category: 'Soups' },
                        { name: 'Pad Thai', description: 'Stir-fried noodles with shrimp and peanuts', price: 16, category: 'Noodles' },
                        { name: 'Sushi Combo', description: '8 pieces nigiri and 6 pieces maki', price: 22, category: 'Sushi' },
                        { name: 'Beef Ramen', description: 'Rich broth with tender beef and noodles', price: 18, category: 'Ramen' },
                        { name: 'Spring Rolls', description: 'Fresh vegetables wrapped in rice paper', price: 9, category: 'Appetizers' },
                        { name: 'Green Curry', description: 'Spicy coconut curry with vegetables', price: 17, category: 'Curry' },
                        { name: 'Dumplings', description: 'Steamed pork and vegetable dumplings', price: 12, category: 'Appetizers' }
                    ],
                    american: [
                        { name: 'Classic Cheeseburger', description: 'Beef patty, cheese, lettuce, tomato', price: 17, category: 'Burgers' },
                        { name: 'BBQ Ribs', description: 'Slow-cooked ribs with BBQ sauce', price: 22, category: 'BBQ' },
                        { name: 'Buffalo Wings', description: 'Spicy chicken wings with blue cheese', price: 14, category: 'Wings' },
                        { name: 'Mac and Cheese', description: 'Creamy macaroni with three cheeses', price: 13, category: 'Comfort Food' },
                        { name: 'Philly Cheesesteak', description: 'Sliced beef with peppers and cheese', price: 16, category: 'Sandwiches' },
                        { name: 'Loaded Nachos', description: 'Tortilla chips with cheese, jalapeños, sour cream', price: 12, category: 'Appetizers' }
                    ],
                    mexican: [
                        { name: 'Chicken Burrito', description: 'Grilled chicken, rice, beans, salsa', price: 14, category: 'Burritos' },
                        { name: 'Fish Tacos', description: 'Grilled fish, cabbage, lime crema', price: 16, category: 'Tacos' },
                        { name: 'Guacamole & Chips', description: 'Fresh avocado dip with tortilla chips', price: 9, category: 'Appetizers' },
                        { name: 'Quesadilla', description: 'Grilled tortilla with cheese and chicken', price: 13, category: 'Quesadillas' },
                        { name: 'Enchiladas', description: 'Rolled tortillas with sauce and cheese', price: 15, category: 'Enchiladas' },
                        { name: 'Churros', description: 'Fried dough with cinnamon sugar', price: 7, category: 'Desserts' }
                    ],
                    indian: [
                        { name: 'Chicken Tikka Masala', description: 'Creamy tomato curry with chicken', price: 18, category: 'Curry' },
                        { name: 'Vegetable Biryani', description: 'Fragrant rice with mixed vegetables', price: 16, category: 'Rice' },
                        { name: 'Naan Bread', description: 'Traditional Indian flatbread', price: 5, category: 'Bread' },
                        { name: 'Samosas', description: 'Fried pastries with spiced filling', price: 8, category: 'Appetizers' },
                        { name: 'Butter Chicken', description: 'Mild curry with tender chicken', price: 17, category: 'Curry' },
                        { name: 'Dal Lentils', description: 'Spiced lentil curry', price: 14, category: 'Vegetarian' },
                        { name: 'Mango Lassi', description: 'Yogurt drink with mango', price: 6, category: 'Beverages' }
                    ],
                    mediterranean: [
                        { name: 'Greek Salad', description: 'Tomatoes, olives, feta, cucumber', price: 15, category: 'Salads' },
                        { name: 'Lamb Gyros', description: 'Seasoned lamb with tzatziki', price: 17, category: 'Gyros' },
                        { name: 'Hummus Plate', description: 'Chickpea dip with pita bread', price: 12, category: 'Appetizers' },
                        { name: 'Falafel Wrap', description: 'Fried chickpea balls in pita', price: 14, category: 'Wraps' },
                        { name: 'Moussaka', description: 'Layered eggplant and meat casserole', price: 19, category: 'Casseroles' },
                        { name: 'Baklava', description: 'Sweet pastry with nuts and honey', price: 8, category: 'Desserts' }
                    ],
                    french: [
                        { name: 'Croque Monsieur', description: 'Ham and cheese sandwich', price: 16, category: 'Sandwiches' },
                        { name: 'French Onion Soup', description: 'Classic onion soup with cheese', price: 12, category: 'Soups' },
                        { name: 'Quiche Lorraine', description: 'Bacon and cheese quiche', price: 14, category: 'Quiche' },
                        { name: 'Coq au Vin', description: 'Chicken braised in wine', price: 21, category: 'Mains' },
                        { name: 'Ratatouille', description: 'Stewed vegetables from Provence', price: 15, category: 'Vegetarian' },
                        { name: 'Crème Brûlée', description: 'Vanilla custard with caramelized sugar', price: 9, category: 'Desserts' }
                    ]
                };

                const fullMenu = baseMenus[cuisine] || baseMenus.american;
                
                // Generate dynamic menu size (like real data: some restaurants have 3 items, others have 15+)
                const menuSizes = [3, 4, 5, 6, 7, 8, 9, 10, 12, 15]; // Different realistic menu sizes
                const targetSize = menuSizes[Math.floor(Math.random() * menuSizes.length)];
                
                // Shuffle and take random items up to target size
                const shuffled = [...fullMenu].sort(() => 0.5 - Math.random());
                const selectedItems = shuffled.slice(0, Math.min(targetSize, fullMenu.length));
                
                // Convert prices to local currency
                return selectedItems.map(item => ({
                    ...item,
                    price: this.currencyService.convertPrice(item.price.toString(), 'USD')
                }));
            }

            displayRestaurants() {
                const container = document.getElementById('restaurantsContainer');
                
                if (this.restaurants.length === 0) {
                    container.innerHTML = `
                        <div class="no-data">
                            <h2>
                                <span class="en">No restaurants found</span>
                                <span class="sv hidden">Inga restauranger hittades</span>
                            </h2>
                            <p>
                                <span class="en">No restaurants found in your area.</span>
                                <span class="sv hidden">Inga restauranger hittades i ditt område.</span>
                            </p>
                        </div>
                    `;
                    return;
                }

                const grid = document.createElement('div');
                grid.className = 'restaurant-grid';
                
                this.restaurants.forEach(restaurant => {
                    const card = this.createRestaurantCard(restaurant);
                    grid.appendChild(card);
                });

                container.innerHTML = '';
                container.appendChild(grid);
            }

            createRestaurantCard(restaurant) {
                const card = document.createElement('div');
                card.className = 'restaurant-card';
                card.id = `restaurant-${restaurant.id}`;
                
                const distanceText = restaurant.distance < 1000 
                    ? `${Math.round(restaurant.distance)}m` 
                    : `${(restaurant.distance / 1000).toFixed(1)}km`;

                // Group menu items by category for better display
                const menuByCategory = {};
                restaurant.menu.forEach(item => {
                    const category = item.category || 'Menu Items';
                    if (!menuByCategory[category]) {
                        menuByCategory[category] = [];
                    }
                    menuByCategory[category].push(item);
                });

                let menuHTML = '';
                Object.entries(menuByCategory).forEach(([category, items]) => {
                    if (Object.keys(menuByCategory).length > 1) {
                        menuHTML += `<div style="font-weight: 600; margin: 1rem 0 0.5rem 0; color: #6e6e73; font-size: 0.875rem;">${category}</div>`;
                    }
                    
                    items.forEach(item => {
                        menuHTML += `
                            <div class="menu-item">
                                <div class="menu-item-details">
                                    <div class="menu-item-name">${item.name}</div>
                                    <div class="menu-item-description">${item.description}</div>
                                </div>
                                <div class="menu-item-price">${item.price}</div>
                            </div>
                        `;
                    });
                });

                card.innerHTML = `
                    <div class="restaurant-header">
                        <div class="restaurant-info">
                            <h2 class="restaurant-name">${restaurant.name}</h2>
                            <div class="restaurant-meta">
                                <div class="restaurant-meta-item">
                                    <span class="icon-map"></span>
                                    <span>${distanceText} away</span>
                                </div>
                                <div class="restaurant-meta-item">
                                    <span class="icon-clock"></span>
                                    <span>${restaurant.walkTime} min walk</span>
                                </div>
                            </div>
                            <div class="cuisine-badge">
                                ${restaurant.cuisine.charAt(0).toUpperCase() + restaurant.cuisine.slice(1)} Restaurant
                            </div>
                        </div>
                        <div class="restaurant-links">
                            <a href="#" title="Website">🔗</a>
                            <a href="#" title="Google Maps">🗺️</a>
                        </div>
                    </div>
                    
                    <div class="restaurant-content">
                        <div class="menu-section">
                            <h3>
                                <span class="icon-menu"></span>
                                <span class="en">Today's Menu (${restaurant.menu.length} items)</span>
                                <span class="sv hidden">Dagens Meny (${restaurant.menu.length} rätter)</span>
                            </h3>
                            <div class="menu-items">
                                ${menuHTML}
                            </div>
                        </div>
                        
                        <div class="separator"></div>
                        
                        <div class="special-offer">
                            ⭐ Rating: ${restaurant.rating.toFixed(1)} • ${restaurant.isOpen ? 'Open now' : 'Closed'} • ${restaurant.menu.length} menu items
                        </div>
                    </div>
                `;

                return card;
            }
        }

        // Random restaurant selection
        function selectRandomRestaurant() {
            const cards = document.querySelectorAll('.restaurant-card');
            if (cards.length === 0) return;
            
            // Clear previous highlights
            cards.forEach(card => {
                card.classList.remove('highlighted');
            });
            
            const button = document.getElementById('randomButton');
            const isSwedish = document.querySelector('.sv:not(.hidden)') !== null;
            
            button.innerHTML = isSwedish ? 'Väljer...' : 'Choosing...';
            button.disabled = true;
            
            setTimeout(() => {
                const randomIndex = Math.floor(Math.random() * cards.length);
                const randomCard = cards[randomIndex];
                
                randomCard.classList.add('highlighted');
                randomCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                // Reset button
                button.innerHTML = isSwedish ? 'Välj något åt mig' : 'Pick something for me';
                button.disabled = false;
            }, 1500);
        }

        // Language switching
        function toggleLanguage() {
            const enElements = document.querySelectorAll('.en');
            const svElements = document.querySelectorAll('.sv');
            
            enElements.forEach(el => el.classList.toggle('hidden'));
            svElements.forEach(el => el.classList.toggle('hidden'));
            
            // Update page language attribute
            const isSwedish = document.querySelector('.sv:not(.hidden)') !== null;
            document.documentElement.lang = isSwedish ? 'sv' : 'en';
            
            // Save language preference
            localStorage.setItem('language', isSwedish ? 'sv' : 'en');
        }

        // Go to top and reset random selection
        function goToTop() {
            // Clear any highlighted restaurants
            document.querySelectorAll('.restaurant-card.highlighted').forEach(card => {
                card.classList.remove('highlighted');
            });
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Load saved language preference and initialize app
        document.addEventListener('DOMContentLoaded', function() {
            const savedLanguage = localStorage.getItem('language');
            if (savedLanguage === 'sv') {
                // Switch to Swedish if saved
                const enElements = document.querySelectorAll('.en');
                const svElements = document.querySelectorAll('.sv');
                
                enElements.forEach(el => el.classList.add('hidden'));
                svElements.forEach(el => el.classList.remove('hidden'));
                
                document.documentElement.lang = 'sv';
            }
            
            // Initialize the app
            new LocationLunchFinder();
        });
    </script>
</body>
</html>