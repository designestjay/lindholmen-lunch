<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LunchFinder - Discover Lunch Anywhere</title>
    <style>
        :root {
            --primary: #2563eb;
            --primary-hover: #1d4ed8;
            --secondary: #f1f5f9;
            --accent: #f97316;
            --success: #16a34a;
            --warning: #eab308;
            --error: #dc2626;
            --text: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --background: #ffffff;
            --card: #ffffff;
            --radius: 0.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.25rem;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
        }

        .location-section {
            background: var(--card);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .location-controls {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .location-input {
            flex: 1;
            min-width: 300px;
            padding: 0.75rem;
            border: 2px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
        }

        .location-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: var(--secondary);
            color: var(--text);
        }

        .btn-secondary:hover {
            background: #e2e8f0;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .status {
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .status.loading {
            background: #dbeafe;
            color: var(--primary);
            border: 1px solid #93c5fd;
        }

        .status.success {
            background: #dcfce7;
            color: var(--success);
            border: 1px solid #86efac;
        }

        .status.error {
            background: #fee2e2;
            color: var(--error);
            border: 1px solid #fca5a5;
        }

        .filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .filter-group label {
            font-weight: 600;
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .filter-select {
            padding: 0.5rem;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            background: white;
        }

        .restaurants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .restaurant-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .restaurant-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .restaurant-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .restaurant-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 0.25rem;
        }

        .restaurant-type {
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .restaurant-rating {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            font-size: 0.875rem;
            color: var(--warning);
        }

        .restaurant-info {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        .restaurant-distance {
            font-weight: 600;
            color: var(--primary);
        }

        .restaurant-status {
            display: inline-block;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-open {
            background: #dcfce7;
            color: var(--success);
        }

        .status-closed {
            background: #fee2e2;
            color: var(--error);
        }

        .menu-preview {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border);
        }

        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item-name {
            font-weight: 500;
        }

        .menu-item-price {
            color: var(--primary);
            font-weight: 600;
        }

        .loading-spinner {
            display: inline-block;
            width: 1rem;
            height: 1rem;
            border: 2px solid #f3f3f3;
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .demo-note {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            color: #92400e;
            padding: 1rem;
            border-radius: var(--radius);
            margin-bottom: 2rem;
            font-size: 0.875rem;
        }

        .demo-note strong {
            display: block;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .location-controls {
                flex-direction: column;
            }

            .location-input {
                min-width: auto;
            }

            .filters {
                flex-direction: column;
            }

            .restaurants-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üçΩÔ∏è LunchFinder</h1>
            <p>Discover the best lunch spots near you, anywhere in the world</p>
        </header>

        <div class="demo-note">
            <strong>üöÄ Prototype Demo</strong>
            This is a working prototype that demonstrates location-based restaurant discovery. 
            It uses real geolocation and Google Places API simulation to show nearby restaurants.
            In production, this would include live menu scraping and real-time data.
        </div>

        <div class="location-section">
            <h2>üìç Your Location</h2>
            <div class="location-controls">
                <input 
                    type="text" 
                    class="location-input" 
                    id="locationInput" 
                    placeholder="Enter address or let us detect your location..."
                >
                <button class="btn btn-secondary" id="detectLocationBtn">
                    üìç Detect Location
                </button>
                <button class="btn btn-primary" id="searchBtn">
                    üîç Find Restaurants
                </button>
            </div>
            
            <div id="locationStatus"></div>
        </div>

        <div class="filters">
            <div class="filter-group">
                <label>Search Radius</label>
                <select class="filter-select" id="radiusFilter">
                    <option value="500">500m</option>
                    <option value="1000" selected>1km</option>
                    <option value="2000">2km</option>
                    <option value="5000">5km</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Cuisine Type</label>
                <select class="filter-select" id="cuisineFilter">
                    <option value="">All Cuisines</option>
                    <option value="italian">Italian</option>
                    <option value="asian">Asian</option>
                    <option value="american">American</option>
                    <option value="mexican">Mexican</option>
                    <option value="indian">Indian</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Price Range</label>
                <select class="filter-select" id="priceFilter">
                    <option value="">Any Price</option>
                    <option value="1">$ (Budget)</option>
                    <option value="2">$$ (Moderate)</option>
                    <option value="3">$$$ (Expensive)</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Open Now</label>
                <select class="filter-select" id="openFilter">
                    <option value="">Any Time</option>
                    <option value="true">Open Now</option>
                </select>
            </div>
        </div>

        <div id="restaurantsContainer">
            <div class="restaurants-grid" id="restaurantsGrid"></div>
        </div>
    </div>

    <script>
        class LunchFinder {
            constructor() {
                this.currentLocation = null;
                this.restaurants = [];
                this.initializeEventListeners();
            }

            initializeEventListeners() {
                document.getElementById('detectLocationBtn').addEventListener('click', () => this.detectLocation());
                document.getElementById('searchBtn').addEventListener('click', () => this.searchRestaurants());
                document.getElementById('locationInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.searchRestaurants();
                });

                // Filter event listeners
                ['radiusFilter', 'cuisineFilter', 'priceFilter', 'openFilter'].forEach(id => {
                    document.getElementById(id).addEventListener('change', () => this.applyFilters());
                });
            }

            showStatus(message, type = 'loading') {
                const statusDiv = document.getElementById('locationStatus');
                statusDiv.innerHTML = `<div class="status ${type}">${message}</div>`;
            }

            async detectLocation() {
                this.showStatus('üîç Detecting your location...', 'loading');
                
                if (!navigator.geolocation) {
                    this.showStatus('‚ùå Geolocation is not supported by this browser', 'error');
                    return;
                }

                try {
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            enableHighAccuracy: true,
                            timeout: 10000,
                            maximumAge: 300000
                        });
                    });

                    this.currentLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    // Reverse geocode to get address
                    const address = await this.reverseGeocode(this.currentLocation);
                    document.getElementById('locationInput').value = address;
                    
                    this.showStatus(`‚úÖ Location detected: ${address}`, 'success');
                    
                    // Auto-search for restaurants
                    setTimeout(() => this.searchRestaurants(), 1000);

                } catch (error) {
                    console.error('Geolocation error:', error);
                    this.showStatus('‚ùå Could not detect location. Please enter manually.', 'error');
                }
            }

            async reverseGeocode(location) {
                // In a real app, you'd use Google Maps Geocoding API
                // For demo, we'll simulate this
                return `${location.lat.toFixed(4)}, ${location.lng.toFixed(4)}`;
            }

            async searchRestaurants() {
                const locationInput = document.getElementById('locationInput').value;
                
                if (!locationInput && !this.currentLocation) {
                    this.showStatus('‚ùå Please enter a location or detect your current location', 'error');
                    return;
                }

                this.showStatus('üîç Searching for restaurants...', 'loading');

                try {
                    // If we have text input, geocode it first
                    if (locationInput && !this.currentLocation) {
                        this.currentLocation = await this.geocodeAddress(locationInput);
                    }

                    // Simulate API call to find restaurants
                    const restaurants = await this.findNearbyRestaurants(this.currentLocation);
                    this.restaurants = restaurants;
                    
                    this.showStatus(`‚úÖ Found ${restaurants.length} restaurants nearby`, 'success');
                    this.displayRestaurants(restaurants);

                } catch (error) {
                    console.error('Search error:', error);
                    this.showStatus('‚ùå Error searching for restaurants. Please try again.', 'error');
                }
            }

            async geocodeAddress(address) {
                // Simulate geocoding - in real app, use Google Maps Geocoding API
                // For demo, return a location in Gothenburg
                return {
                    lat: 57.7089 + (Math.random() - 0.5) * 0.01,
                    lng: 11.9746 + (Math.random() - 0.5) * 0.01
                };
            }

            async findNearbyRestaurants(location) {
                // Simulate Google Places API call
                await new Promise(resolve => setTimeout(resolve, 1500)); // Simulate API delay

                const restaurantTypes = ['italian', 'asian', 'american', 'mexican', 'indian', 'cafe', 'bistro'];
                const restaurants = [];

                for (let i = 0; i < 12; i++) {
                    const distance = Math.random() * 2000; // Distance in meters
                    const isOpen = Math.random() > 0.3; // 70% chance of being open
                    const rating = 3.5 + Math.random() * 1.5; // Rating between 3.5-5.0
                    const priceLevel = Math.floor(Math.random() * 3) + 1; // 1-3
                    const cuisine = restaurantTypes[Math.floor(Math.random() * restaurantTypes.length)];

                    restaurants.push({
                        id: `restaurant_${i}`,
                        name: this.generateRestaurantName(cuisine),
                        type: cuisine.charAt(0).toUpperCase() + cuisine.slice(1) + ' Restaurant',
                        cuisine: cuisine,
                        rating: rating,
                        priceLevel: priceLevel,
                        distance: distance,
                        isOpen: isOpen,
                        address: `${Math.floor(Math.random() * 999) + 1} Main Street`,
                        phone: '+1 (555) 123-4567',
                        website: `https://${this.generateRestaurantName(cuisine).toLowerCase().replace(/\s+/g, '')}.com`,
                        menu: this.generateSampleMenu(cuisine),
                        location: {
                            lat: location.lat + (Math.random() - 0.5) * 0.02,
                            lng: location.lng + (Math.random() - 0.5) * 0.02
                        }
                    });
                }

                return restaurants.sort((a, b) => a.distance - b.distance);
            }

            generateRestaurantName(cuisine) {
                const names = {
                    italian: ['Bella Vista', 'Mama Mia', 'La Dolce Vita', 'Nonna\'s Kitchen', 'Amore Italiano'],
                    asian: ['Golden Dragon', 'Sakura Sushi', 'Pho Saigon', 'Bamboo Garden', 'Zen Kitchen'],
                    american: ['The Burger Joint', 'Liberty Grill', 'Stars & Stripes', 'Main Street Diner', 'All-American Eats'],
                    mexican: ['El Sombrero', 'Casa Mexicana', 'Fiesta Cantina', 'Los Amigos', 'Taco Libre'],
                    indian: ['Spice Palace', 'Taj Mahal', 'Curry House', 'Mumbai Express', 'Saffron Garden'],
                    cafe: ['Corner Caf√©', 'The Daily Grind', 'Brew & Bite', 'Cozy Corner', 'Steam & Bean'],
                    bistro: ['Le Petit Bistro', 'Garden Bistro', 'The Local', 'Artisan Kitchen', 'Fresh & Local']
                };
                
                const nameList = names[cuisine] || names.cafe;
                return nameList[Math.floor(Math.random() * nameList.length)];
            }

            generateSampleMenu(cuisine) {
                const menus = {
                    italian: [
                        { name: 'Margherita Pizza', price: '$14.99' },
                        { name: 'Spaghetti Carbonara', price: '$16.99' },
                        { name: 'Caesar Salad', price: '$12.99' }
                    ],
                    asian: [
                        { name: 'Chicken Teriyaki Bowl', price: '$13.99' },
                        { name: 'Vegetable Fried Rice', price: '$11.99' },
                        { name: 'Miso Soup', price: '$4.99' }
                    ],
                    american: [
                        { name: 'Classic Cheeseburger', price: '$15.99' },
                        { name: 'BBQ Ribs', price: '$19.99' },
                        { name: 'Buffalo Wings', price: '$12.99' }
                    ],
                    mexican: [
                        { name: 'Chicken Burrito', price: '$12.99' },
                        { name: 'Fish Tacos', price: '$14.99' },
                        { name: 'Guacamole & Chips', price: '$8.99' }
                    ],
                    indian: [
                        { name: 'Chicken Tikka Masala', price: '$16.99' },
                        { name: 'Vegetable Biryani', price: '$14.99' },
                        { name: 'Naan Bread', price: '$3.99' }
                    ]
                };

                return menus[cuisine] || menus.american;
            }

            displayRestaurants(restaurants) {
                const grid = document.getElementById('restaurantsGrid');
                grid.innerHTML = '';

                if (restaurants.length === 0) {
                    grid.innerHTML = '<p>No restaurants found. Try adjusting your filters or search area.</p>';
                    return;
                }

                restaurants.forEach(restaurant => {
                    const card = this.createRestaurantCard(restaurant);
                    grid.appendChild(card);
                });
            }

            createRestaurantCard(restaurant) {
                const card = document.createElement('div');
                card.className = 'restaurant-card';
                
                const stars = '‚òÖ'.repeat(Math.floor(restaurant.rating)) + '‚òÜ'.repeat(5 - Math.floor(restaurant.rating));
                const priceSymbols = '$'.repeat(restaurant.priceLevel);
                const distanceText = restaurant.distance < 1000 
                    ? `${Math.round(restaurant.distance)}m` 
                    : `${(restaurant.distance / 1000).toFixed(1)}km`;

                card.innerHTML = `
                    <div class="restaurant-header">
                        <div>
                            <div class="restaurant-name">${restaurant.name}</div>
                            <div class="restaurant-type">${restaurant.type}</div>
                        </div>
                        <div class="restaurant-rating">
                            <span>${stars}</span>
                            <span>${restaurant.rating.toFixed(1)}</span>
                        </div>
                    </div>
                    
                    <div class="restaurant-info">
                        <div class="restaurant-distance">üìç ${distanceText} away</div>
                        <div>üí∞ ${priceSymbols} ‚Ä¢ ${restaurant.address}</div>
                        <div>üìû ${restaurant.phone}</div>
                        <div>
                            <span class="restaurant-status ${restaurant.isOpen ? 'status-open' : 'status-closed'}">
                                ${restaurant.isOpen ? 'üü¢ Open Now' : 'üî¥ Closed'}
                            </span>
                        </div>
                    </div>

                    <div class="menu-preview">
                        <strong>Sample Menu:</strong>
                        ${restaurant.menu.map(item => `
                            <div class="menu-item">
                                <span class="menu-item-name">${item.name}</span>
                                <span class="menu-item-price">${item.price}</span>
                            </div>
                        `).join('')}
                    </div>
                `;

                return card;
            }

            applyFilters() {
                const radius = parseInt(document.getElementById('radiusFilter').value);
                const cuisine = document.getElementById('cuisineFilter').value;
                const priceLevel = document.getElementById('priceFilter').value;
                const openOnly = document.getElementById('openFilter').value === 'true';

                let filtered = this.restaurants.filter(restaurant => {
                    // Distance filter
                    if (restaurant.distance > radius) return false;
                    
                    // Cuisine filter
                    if (cuisine && restaurant.cuisine !== cuisine) return false;
                    
                    // Price filter
                    if (priceLevel && restaurant.priceLevel !== parseInt(priceLevel)) return false;
                    
                    // Open filter
                    if (openOnly && !restaurant.isOpen) return false;
                    
                    return true;
                });

                this.displayRestaurants(filtered);
                
                const statusDiv = document.getElementById('locationStatus');
                statusDiv.innerHTML = `<div class="status success">‚úÖ Showing ${filtered.length} restaurants matching your filters</div>`;
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            new LunchFinder();
        });
    </script>
</body>
</html>